import{j as e}from"./jsx-runtime-Z8WwdQU7.js";import{r as m}from"./index-BPQRexiR.js";import{S as N}from"./StorySubmissionForm-B0jHB7b_.js";import{g as y,d as C,e as S,f as v}from"./components-DpadYxWV.js";const T="_pageContainer_155uk_9",B="_pageHeader_155uk_31",b="_mainTitle_155uk_43",O="_subtitle_155uk_61",M="_contentWrapper_155uk_79",$="_filterToggleButton_155uk_95",E="_filterDropdown_155uk_151",G="_filterContainer_155uk_221",W="_filterGroup_155uk_229",R="_filterButton_155uk_251",w="_filterButtonExpanded_155uk_309",F="_filterOptions_155uk_317",I="_filterOptionsExpanded_155uk_329",D="_filterOption_155uk_317",U="_clearFiltersButton_155uk_385",H="_filterOverlay_155uk_425",A="_memorialsSection_155uk_469",L="_memorialsGrid_155uk_479",P="_memorialCard_155uk_495",Y="_silhouetteContainer_155uk_533",z="_memorialInfo_155uk_609",q="_memorialDetails_155uk_675",J="_emptyState_155uk_699",K="_loadMoreContainer_155uk_729",Q="_loadMoreButton_155uk_745",V="_successOverlay_155uk_797",X="_successCard_155uk_815",Z="_successIcon_155uk_835",ee="_successTitle_155uk_869",se="_successMessage_155uk_883",te="_successButton_155uk_897",ne="_formSectionWrapper_155uk_939",ie="_formSectionHeader_155uk_951",re="_formSectionTitle_155uk_963",ae="_formSectionSubtitle_155uk_979",s={pageContainer:T,pageHeader:B,mainTitle:b,subtitle:O,contentWrapper:M,filterToggleButton:$,filterDropdown:E,filterContainer:G,filterGroup:W,filterButton:R,filterButtonExpanded:w,filterOptions:F,filterOptionsExpanded:I,filterOption:D,clearFiltersButton:U,filterOverlay:H,memorialsSection:A,memorialsGrid:L,memorialCard:P,silhouetteContainer:Y,memorialInfo:z,memorialDetails:q,emptyState:J,loadMoreContainer:K,loadMoreButton:Q,successOverlay:V,successCard:X,successIcon:Z,successTitle:ee,successMessage:se,successButton:te,formSectionWrapper:ne,formSectionHeader:ie,formSectionTitle:re,formSectionSubtitle:ae},pe=()=>[{title:"Lives Stolen | Fatal Collisions"},{name:"description",content:"Remembering lives lost in traffic collisions"}];function le({story:n}){const a=n.images&&n.images.length>0;return e.jsxs(v,{to:`/stories/${n.id}`,className:s.memorialCard,children:[e.jsx("div",{className:s.silhouetteContainer,children:a?e.jsx("img",{src:n.images[0],alt:n.victimName||n.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("img",{src:"/Avatar-default.png",alt:"Default avatar",style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsxs("div",{className:s.memorialInfo,children:[e.jsxs("div",{className:s.memorialDetails,children:["Name: ",n.victimName||n.title]}),e.jsxs("div",{className:s.memorialDetails,children:["Age: ",n.age||"N/A"]}),e.jsxs("div",{className:s.memorialDetails,children:["Gender: ",n.gender||"N/A"]}),e.jsxs("div",{className:s.memorialDetails,children:["Type: ",n.category]})]})]})}function oe({filters:n,onFilterChange:a,onClearFilters:k}){const[p,i]=m.useState(!1),[l,h]=m.useState({}),c=["Cyclist","Pedestrian","Motorcyclist"],d=["0-17","18-30","31-45","46-60","60+"],u=["Male","Female","Other"],x=["Fatal"],f=["California","New York","Texas","Washington","Florida","Colorado"],j=["2024","2023","2022","2021"],_=n.roadUserType||n.ageRange||n.gender||n.injuryType||n.state||n.year,o=t=>{h(r=>({...r,[t]:!r[t]}))};return e.jsxs("div",{className:s.filterContainer,children:[e.jsxs("button",{className:s.filterToggleButton,onClick:()=>i(!p),children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M3 6h18M7 12h10M10 18h4"})}),"Filter"]}),p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.filterDropdown,children:[e.jsxs("div",{className:s.filterGroup,children:[e.jsxs("button",{className:`${s.filterButton} ${l.roadUserType?s.filterButtonExpanded:""}`,onClick:()=>o("roadUserType"),children:[e.jsx("span",{children:"Road-user type"}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),e.jsx("div",{className:`${s.filterOptions} ${l.roadUserType?s.filterOptionsExpanded:""}`,children:c.map(t=>e.jsxs("label",{className:s.filterOption,children:[e.jsx("input",{type:"checkbox",checked:n.roadUserType===t,onChange:r=>a("roadUserType",r.target.checked?t:null)}),e.jsx("span",{children:t})]},t))})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsxs("button",{className:`${s.filterButton} ${l.ageRange?s.filterButtonExpanded:""}`,onClick:()=>o("ageRange"),children:[e.jsx("span",{children:"Age range"}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),e.jsx("div",{className:`${s.filterOptions} ${l.ageRange?s.filterOptionsExpanded:""}`,children:d.map(t=>e.jsxs("label",{className:s.filterOption,children:[e.jsx("input",{type:"checkbox",checked:n.ageRange===t,onChange:r=>a("ageRange",r.target.checked?t:null)}),e.jsx("span",{children:t})]},t))})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsxs("button",{className:`${s.filterButton} ${l.gender?s.filterButtonExpanded:""}`,onClick:()=>o("gender"),children:[e.jsx("span",{children:"Gender"}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),e.jsx("div",{className:`${s.filterOptions} ${l.gender?s.filterOptionsExpanded:""}`,children:u.map(t=>e.jsxs("label",{className:s.filterOption,children:[e.jsx("input",{type:"checkbox",checked:n.gender===t,onChange:r=>a("gender",r.target.checked?t:null)}),e.jsx("span",{children:t})]},t))})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsxs("button",{className:`${s.filterButton} ${l.injuryType?s.filterButtonExpanded:""}`,onClick:()=>o("injuryType"),children:[e.jsx("span",{children:"Injury type"}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),e.jsx("div",{className:`${s.filterOptions} ${l.injuryType?s.filterOptionsExpanded:""}`,children:x.map(t=>e.jsxs("label",{className:s.filterOption,children:[e.jsx("input",{type:"checkbox",checked:n.injuryType===t,onChange:r=>a("injuryType",r.target.checked?t:null)}),e.jsx("span",{children:t})]},t))})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsxs("button",{className:`${s.filterButton} ${l.state?s.filterButtonExpanded:""}`,onClick:()=>o("state"),children:[e.jsx("span",{children:"State"}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),e.jsx("div",{className:`${s.filterOptions} ${l.state?s.filterOptionsExpanded:""}`,children:f.map(t=>e.jsxs("label",{className:s.filterOption,children:[e.jsx("input",{type:"checkbox",checked:n.state===t,onChange:r=>a("state",r.target.checked?t:null)}),e.jsx("span",{children:t})]},t))})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsxs("button",{className:`${s.filterButton} ${l.year?s.filterButtonExpanded:""}`,onClick:()=>o("year"),children:[e.jsx("span",{children:"Year"}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),e.jsx("div",{className:`${s.filterOptions} ${l.year?s.filterOptionsExpanded:""}`,children:j.map(t=>e.jsxs("label",{className:s.filterOption,children:[e.jsx("input",{type:"checkbox",checked:n.year===t,onChange:r=>a("year",r.target.checked?t:null)}),e.jsx("span",{children:t})]},t))})]}),_&&e.jsx("button",{className:s.clearFiltersButton,onClick:k,children:"Clear all filters"})]}),e.jsx("div",{className:s.filterOverlay,onClick:()=>i(!1),style:{display:"block",position:"fixed",inset:0,zIndex:50}})]})]})}function he(){const{stories:n}=y(),a=C(),p=S().state==="submitting",[i,l]=m.useState({roadUserType:null,ageRange:null,gender:null,injuryType:null,state:null,year:null}),[h,c]=m.useState(12),d=12,u=m.useMemo(()=>n.filter(t=>{if(i.roadUserType&&t.category!==i.roadUserType)return!1;if(i.ageRange){const[r,g]=i.ageRange.includes("+")?[parseInt(i.ageRange),1/0]:i.ageRange.split("-").map(Number);if(t.age<r||t.age>g)return!1}return!(i.gender&&t.gender!==i.gender||i.injuryType&&t.injuryType!==i.injuryType||i.state&&t.state!==i.state||i.year&&t.year!==i.year)}),[n,i]),x=u.slice(0,h),f=h<u.length,j=(t,r)=>{l(g=>({...g,[t]:r})),c(d)},_=()=>{l({roadUserType:null,ageRange:null,gender:null,injuryType:null,state:null,year:null}),c(d)},o=()=>{c(t=>t+d)};return a!=null&&a.success?e.jsx("div",{className:s.pageContainer,children:e.jsx("div",{className:s.successOverlay,children:e.jsxs("div",{className:s.successCard,children:[e.jsx("div",{className:s.successIcon,children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})})}),e.jsx("h2",{className:s.successTitle,children:"Thank You!"}),e.jsx("p",{className:s.successMessage,children:(a==null?void 0:a.message)||"Your submission has been received. We appreciate you sharing this story."}),e.jsx(v,{to:"/stories",className:s.successButton,children:"Return to Memorial Wall"})]})})}):e.jsxs("div",{className:s.pageContainer,children:[e.jsx("header",{className:s.pageHeader,children:e.jsx("h2",{className:s.mainTitle,children:"Lives Stolen"})}),e.jsxs("div",{className:s.contentWrapper,children:[e.jsx("p",{className:s.subtitle,children:"Fatal Collisions"}),e.jsx(oe,{filters:i,onFilterChange:j,onClearFilters:_}),e.jsx("div",{className:s.memorialsSection,children:u.length===0?e.jsx("div",{className:s.emptyState,children:e.jsx("p",{children:"No memorials found matching your filters."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.memorialsGrid,children:x.map(t=>e.jsx(le,{story:t},t.id))}),f&&e.jsx("div",{className:s.loadMoreContainer,children:e.jsx("button",{className:s.loadMoreButton,onClick:o,children:"Load More"})})]})})]}),e.jsxs("section",{className:s.formSectionWrapper,id:"submit-story",children:[e.jsxs("div",{className:s.formSectionHeader,children:[e.jsx("h2",{className:s.formSectionTitle,children:"Lost someone you love to traffic violence?"}),e.jsx("p",{className:s.formSectionSubtitle,children:"Honor their memory. Share their story."})]}),e.jsx(N,{isSubmitting:p,actionData:a})]})]})}export{he as default,pe as meta};
